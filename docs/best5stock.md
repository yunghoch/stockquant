# Best 5 Stock 선정 프로세스

매일 실행하여 Alpha101 기반 최종 매수 추천 5종목을 선정하는 전체 과정.

## 전체 흐름

```
Step 1: DB 업데이트 (pykrx)
    ↓
Step 2: 데이터 로드 + 필터 (거래일 200일 이상)
    ↓
Step 3: 101개 알파 계산
    ↓
Step 4: 1년 백테스트 → Top 10 알파 선정
    ↓
Step 5: Top 10 알파 투표 → Top 10 종목 후보
    ↓
Step 6: 리포트 생성 (docs/result/YYYY-MM-DD_alpha.md)
    ↓
Step 7: 기초 데이터 분석 → 재무 부실 종목 제외
    ↓
Step 8: 최종 Top 5 선정 (득표+재무+성장성+유동성 종합)
```

## 실행 방법

### Step 1~6: 자동 (스크립트)

```bash
python scripts/daily_alpha.py
```

- 소요시간: 약 50~60분 (알파 계산이 대부분)
- 결과: `docs/result/YYYY-MM-DD_alpha.md` 자동 생성
- 내용: DB 업데이트, Top 10 알파, 각 알파별 추천, 투표 집계, Top 10 종목

### Step 7~8: 수동 (Claude 분석)

스크립트 실행 후 Claude에게 다음을 요청:

```
오늘 리포트 결과의 투표 종목들의 최근 3년 기초 데이터 분석을 통해서
나쁜 종목들은 빼고 나머지 종목들을 정리해줘. 뺀 종목들의 이유도 알려줘.
이 내용을 결과 파일에 같이 넣어줘.
```

이어서:

```
잔류 종목 중에서 최종 5개만 골라줘
```

마지막으로:

```
이것도 결과 파일에 추가하고 커밋 push해줘
```

## 필터링 기준

### 제외 기준 (Step 7)

| 항목 | 기준 |
|------|------|
| 연속 적자 | 2년 이상 영업적자 |
| 자본잠식 | ROE -20% 이하 또는 부채비율 500% 이상 |
| 초소형주 | 시가총액 500억 미만 + 재무 데이터 미비 |
| 극단적 고평가 | PER 100 이상 + 이익 감소 추세 |
| 주가 급락 | 2년간 -50% 이상 하락 + 펀더멘털 악화 |
| 유동성 부족 | 우선주로 일평균 거래량 극소 |

### 선정 기준 (Step 8)

| 항목 | 우선순위 |
|------|---------|
| 득표수 | 알파 시그널 강도 (3표 이상 우선) |
| ROE | 10% 이상 선호 |
| 성장성 | 매출/이익 증가 추세 |
| 유동성 | 일평균 거래량 10만주 이상 선호 |
| 밸류에이션 | PER/PBR 합리적 수준 |

## 최종 결과물

`docs/result/YYYY-MM-DD_alpha.md` 파일에 7개 섹션:

1. DB 업데이트
2. Top 10 알파 (1년 백테스트)
3. 각 알파별 추천 종목
4. 투표 집계
5. 최종 매수 추천 (Top 10)
6. 기초 데이터 분석 (제외/잔류)
7. 최종 매수 추천 (Top 5)
